# microgue

TypeScriptで実装されたターミナルベースのターン制タクティカルローグライク。

## 概要

microgueは、コマンドラインで動作するタクティカルローグライクゲームです。グリッドベースの戦術戦闘、ダンジョン探索、アイテム収集、メタプログレッションを特徴としています。

### 主要機能

- **タクティカル戦闘**: グリッド上での位置取りが重要なターン制戦闘
- **タイムラインシステム**: APゲージによる行動順決定
- **ダンジョン探索**: グラフベースの分岐型ダンジョン構造
- **アイテムシステム**: 武器・防具・レリックによる多彩な装備効果
- **メタプログレッション**: プレイを重ねることでアンロック要素が増加
- **ボス戦**: 強力なレリックを装備したボスとの戦闘

## 技術スタック

- TypeScript
- Node.js
- 関数型プログラミングスタイル（ピュア関数、データと関数の分離）

## 開発状況

現在Phase 6（ボス戦・バランス調整）まで部分完了。基本的なゲームループは実装済みで、デモレベルでプレイ可能です。

**完了フェーズ:**
- Phase 1: コアループ ✅
- Phase 2: 基本戦闘システム ✅
- Phase 3: ダンジョンシステム ✅
- Phase 4: アイテム・成長システム ✅
- Phase 5: メタプログレッション ✅
- Phase 6: ボス戦・バランス調整 🚧（部分完了）

詳細は [PLAN.md](PLAN.md) と [PROGRESS.md](PROGRESS.md) を参照してください。

## セットアップ

```bash
# 依存関係のインストール
npm install

# ビルド
npm run build

# 実行
npm start
```

## ゲームシステム

### 戦闘システム

- グリッドベースの位置取り
- APゲージによる行動順決定（SPDステータスに影響）
- 攻撃・移動・待機の基本アクション
- ダメージ計算（ATK, DEF, クリティカル、各種レリック効果）

### ダンジョン構造

- 6レベルのグラフ構造（スタート → 中間部屋 → ボス）
- 通常部屋、エリート部屋、大群部屋、宝物庫、回復部屋、ボス部屋
- レベルスキップ機能（50%確率で1箇所のショートカット）

### アイテムシステム

- **メジャーレリック**: 強力な効果を持つ装備（Common/Rare/Epic）
- **マイナーレリック**: 既存効果の強化
- **消耗品**: 即時効果アイテム

### 効果タイプ

HP増加、攻撃力増加、防御力増加、速度増加、クリティカル率、クリティカルダメージ、ライフスティール、ダメージ軽減、回避率、命中率、反射ダメージ、継続ダメージ、攻撃力デバフ、防御力デバフ、速度デバフ

## プロジェクト構成

```
src/
├── combat/       # 戦闘システム
├── core/         # ゲームループ、乱数
├── input/        # 入力システム
├── items/        # アイテム、効果、報酬
├── progression/  # メタプログレッション、セーブ/ロード
├── rendering/    # 描画、フォーマッター
├── types/        # 型定義
├── world/        # ダンジョン生成、ナビゲーション
└── main.ts       # エントリポイント

data/             # ゲームデータ（JSON）
├── bosses.json   # ボス定義
└── unlocks.json  # アンロック定義

saves/            # セーブデータ
└── meta.json     # メタ進行データ
```

## ライセンス

MIT
